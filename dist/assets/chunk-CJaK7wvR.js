var e=Object.defineProperty,t=(t,i,a)=>(((t,i,a)=>{i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a})(t,"symbol"!=typeof i?i+"":i,a),a);const i=new class{constructor(){t(this,"webApp",null),t(this,"isInitialized",!1),this.initialize()}initialize(){var e;"undefined"!=typeof window&&(null==(e=window.Telegram)?void 0:e.WebApp)&&(this.webApp=window.Telegram.WebApp,this.webApp.ready(),this.isInitialized=!0,this.webApp.expand(),this.webApp.enableClosingConfirmation=!1)}isAvailable(){return this.isInitialized&&null!==this.webApp}getUser(){return this.webApp?this.webApp.initDataUnsafe.user:null}getTheme(){return this.webApp?this.webApp.colorScheme:"light"}getThemeParams(){return this.webApp?this.webApp.themeParams:{}}impact(e="light"){var t;(null==(t=this.webApp)?void 0:t.HapticFeedback)&&this.webApp.HapticFeedback.impactOccurred(e)}notification(e){var t;(null==(t=this.webApp)?void 0:t.HapticFeedback)&&this.webApp.HapticFeedback.notificationOccurred(e)}selectionChanged(){var e;(null==(e=this.webApp)?void 0:e.HapticFeedback)&&this.webApp.HapticFeedback.selectionChanged()}showMainButton(e,t){var i;(null==(i=this.webApp)?void 0:i.MainButton)&&(this.webApp.MainButton.setText(e),this.webApp.MainButton.onClick(t),this.webApp.MainButton.show())}hideMainButton(){var e;(null==(e=this.webApp)?void 0:e.MainButton)&&this.webApp.MainButton.hide()}setMainButtonText(e){var t;(null==(t=this.webApp)?void 0:t.MainButton)&&this.webApp.MainButton.setText(e)}showBackButton(e){var t;(null==(t=this.webApp)?void 0:t.BackButton)&&(this.webApp.BackButton.onClick(e),this.webApp.BackButton.show())}hideBackButton(){var e;(null==(e=this.webApp)?void 0:e.BackButton)&&this.webApp.BackButton.hide()}showAlert(e){var t;(null==(t=this.webApp)?void 0:t.showAlert)?this.webApp.showAlert(e):alert(e)}showConfirm(e){return new Promise(t=>{var i;(null==(i=this.webApp)?void 0:i.showConfirm)?this.webApp.showConfirm(e,t):t(confirm(e))})}shareMessage(e){return new Promise(t=>{var i;(null==(i=this.webApp)?void 0:i.shareMessage)?this.webApp.shareMessage(e,t):navigator.share?navigator.share({text:e}).then(()=>t(!0)).catch(()=>t(!1)):navigator.clipboard.writeText(e).then(()=>t(!0)).catch(()=>t(!1))})}setCloudItem(e,t){return new Promise(i=>{var a;if(null==(a=this.webApp)?void 0:a.CloudStorage)this.webApp.CloudStorage.setItem(e,t,e=>{i(!e)});else try{localStorage.setItem(e,t),i(!0)}catch(n){i(!1)}})}getCloudItem(e){return new Promise(t=>{var i;if(null==(i=this.webApp)?void 0:i.CloudStorage)this.webApp.CloudStorage.getItem(e,(e,i)=>{t(e?null:i||null)});else try{t(localStorage.getItem(e))}catch(a){t(null)}})}openStarsPayment(e,t){return new Promise(i=>{this.showAlert(`Поддержать Gropy: ${e} ⭐\n\n${t}`),i(!0)})}close(){var e;(null==(e=this.webApp)?void 0:e.close)&&this.webApp.close()}},a=e=>i.notification(e),n=e=>i.shareMessage(e);export{a,i as b,n as t};
